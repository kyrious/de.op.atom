<div>
	<form [formGroup]="this.recipeForm" (ngSubmit)="onSubmit(recipeForm.getRawValue())">
		<mat-form-field appearance="fill">
			<mat-label>Name</mat-label>
			<input matInput type="text" formControlName="name">
		</mat-form-field>
		<mat-form-field appearance="fill">
			<mat-label>Description</mat-label>
			<textarea matInput type="text" formControlName="description"></textarea>
		</mat-form-field>
		<div id="recipeParts">
			<ng-container formArrayName="parts">
				<div *ngFor="let p of this.partArray.controls; index as i">
					<ng-container [formGroupName]="i">
						<atom-filterable-select label="Ingredient" formControlNaming="ingredient"
							[parentFormGroup]="partArray.get(i+'')" [compare]="compareIngredients"
							[displayFunction]="displayIngredient" [options]="possibleIngredients()">
						</atom-filterable-select>
						<mat-form-field appearance="fill">
							<mat-label>Amount</mat-label>
							<input matInput type="number" formControlName="amount">
						</mat-form-field>
						<atom-filterable-select label="Unit" formControlNaming="unit"
							[parentFormGroup]="partArray.get(i+'')" [compare]="compareUnits"
							[displayFunction]="displayUnit" [options]="possibleUnits()">
						</atom-filterable-select>
						<button type="button" (click)="this.removePart(i)">Remove Part</button>
					</ng-container>
				</div>
			</ng-container>
			<button type="button" (click)="this.addNewPart()">Add Part</button>
		</div>
		<button>Submit</button>
	</form>
</div>